package org.opentestsystem.delivery.logging;

import java.util.Map;

/**
 * Centralized event logger.
 */
public interface EventLogger {
  enum Checkpoint {
    NONE,
    ENTER,
    EXIT,
    ERROR,
  }

  interface LogEvent {
    String name();
  }

  interface EventData {
    String name();
  }

  enum BaseEventData implements EventData {
    APP,
    ELAPSED_TIME,
    CHECKPOINT,
    HTTP_REQUEST_UUID,
    HTTP_SESSION_ID,
    RESPONSE_CODE,
    RESULT,
    SUB_EVENT,
    UNKNOWN,
  }

  /**
   * Add a supplemental piece of info that will be logged on subsequent log calls.
   */
  void putField(final String key, final Object value);

  /**
   * Get a supplemental piece of info that was placed into the logger.
   */
  Object getField(final String key);

  /**
   * Log event occurrences to centralized logging.
   * <p>
   * These events are intended to be sent to a logstash server and searchable using elastic search.
   *  @param app        name of the app writing the log
   * @param logEvent   name of the event occurring
   * @param checkpoint an optional checkpoint name
   * @param message    an optional free-format message string to add to the log entry
   * @param data       optional searchable event data to add to the recorded event
   */
   void info(final String app, final String logEvent, final String checkpoint,
             final String message, final Map<EventData, Object> data);

   void info(final EventInfo eventData);

  /**
   * Log event errors to centralized logging.
   * <p>
   * These events are intended to be sent to a logstash server and searchable using elastic search.
   *  @param app        name of the app writing the log
   * @param logEvent   name of the event occurring
   * @param checkpoint an optional checkpoint name
   * @param message    an optional free-format message string to add to the log entry
   * @param data       optional searchable event data to add to the recorded event
   */
  void error(final String app, final String logEvent, final String checkpoint,
             String message, final Map<EventData, Object> data, final Exception e);

  void error(final EventInfo eventData, final Exception e);
}
